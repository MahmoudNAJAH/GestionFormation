@model IEnumerable<GestionFormation.DTO.JourneeDTO>

@{
    //Pour le Calcul du numéro de la semaine
    System.Globalization.DateTimeFormatInfo dfi = System.Globalization.DateTimeFormatInfo.CurrentInfo;
    System.Globalization.Calendar cal = dfi.Calendar;
    int WeekIndex = cal.GetWeekOfYear(ViewBag.DateLundi, dfi.CalendarWeekRule, dfi.FirstDayOfWeek);

    ViewBag.Title = "Emploi du temps de la Semaine " + WeekIndex;
}

@Styles.Render("~/Content/EmploiDuTemps.css")


<div class="edt-body">

    <span class="edt-titre">@ViewBag.Title</span>


    <table class="edt-semaine">

        <tr class="edt-header-semaine">

            @for (int index_jours = 0; index_jours < 7; index_jours++)
            {
                <th class="edt-column edt-header-column">
                    <p>@ViewBag.DateLundi.AddDays(index_jours).DayOfWeek</p>
                    <p>@ViewBag.DateLundi.AddDays(index_jours).ToString("dd/MM/yyyy")</p>
                </th>
            }

        </tr>

        <tr class="edt-body-semaine">

            @for (int index_jours = 0; index_jours < 7; index_jours++)
            {
                //Dans tous les cas, on veut 7 colonnes
                <td class="edt-column edt-body-column">
                    <div class="edt-container-journee">
                        @* On remploi les colonnes *@
                        @foreach (var item in Model)
                        {
                            if (item.Date.ToString("dd/MM/yyyy") == @ViewBag.DateLundi.AddDays(index_jours).ToString("dd/MM/yyyy"))
                            {
                                <div class="edt-container-journee-ue">
                                    <div class="edt-journee-formation">
                                        <span class="edt-journee-formation-nom">@item.Formation.Nom</span>
                                    </div>
                                    <div class="edt-journee-formateur">
                                        <span class="edt-journee-formateur-nom">@item.Formateur.Nom  @item.Formateur.Prenom </span>
                                    </div>
                                </div>
                            }
                        }
                    </div>
                </td>
            }


        </tr>

    </table>

    
    @Html.ActionLink("Semaine Précédente", "NextWeek", new { dateReference = ViewBag.DateLundi.AddDays(-7) }, new { @class= "edt-btn-next-link edt-btn-next-gauche" })

    @Html.ActionLink("Semaine Suivante", "NextWeek", "EmploiDuTemps", new { dateReference = ViewBag.DateLundi.AddDays(7) }, new { @class = "edt-btn-next-link" })
    
   

</div>